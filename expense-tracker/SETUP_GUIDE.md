# ☁️ Google Apps Script (GAS) 連携セットアップガイド

このガイドでは、支出管理アプリのデータを Google スプレッドシートに保存するためのセットアップ手順を説明します。

## 📝 手順 1: スプレッドシートの作成

1. [Google スプレッドシート](https://sheets.new) で新しいスプレッドシートを作成します。
2. シート名を **`Expenses`** に変更します（デフォルトは「シート1」）。
3. 1行目に以下のヘッダーを入力します（オプション：GASが自動生成もします）。
   - A列: `ID`
   - B列: `日付`
   - C列: `カテゴリ`
   - D列: `金額`
   - E列: `メモ`

## 🔗 手順 2: Apps Script の設定

1. スプレッドシートのメニューから **「拡張機能」→「Apps Script」** を選択します。
2. エディタが開いたら、最初からあるコードをすべて削除します。
3. リポジトリの `expense-tracker/gas/Code.gs` の内容をコピーして貼り付けます。
4. プロジェクト名（例：「支出管理アプリAPI」）を入力して保存します。

## 🚀 手順 3: Webアプリとしてデプロイ

1. 右上の **「デプロイ」→「新しいデプロイ」** をクリックします。
2. 種類の選択で **「ウェブアプリ」** を選択します。
3. 設定を以下のように行います：
   - 説明: `Initial deployment`
   - ウェブアプリとして実行: **「自分」**
   - アクセスできるユーザー: **「全員」**（※APIとして利用するため）
4. **「デプロイ」** をクリックします。
5. 承認を求められたら「承認を構成」→自分のアカウントを選択→「詳細」→「支出管理アプリAPI（安全ではないページ）に移動」→「許可」をクリックします。
6. 発行された **「ウェブアプリのURL」** をコピーします。

## 🌐 手順 4: アプリへの設定

1. 支出管理アプリ（GitHub Pagesなど）を開きます。
2. 「☁️ クラウド同期」セクションを見つけます。
3. コピーしたURLを **「GAS WebアプリURL を入力」** 欄に貼り付けます。
4. **「URL保存」** ボタンをクリックします。

## 🔄 手順 5: 動作確認

1. 何か支出を記録します。
2. **「⬆️ アップロード」** をクリックして、スプレッドシートにデータが書き込まれるか確認します。
3. **「🔄 同期」** を使うと、複数のデバイス間でデータをマージできます。

---

> [!NOTE]
> **アクセスできるユーザーを「全員」にする理由**
> 
> Webアプリからブラウザ越しにAPIを叩く際、OAuth認証の手間を省きつつ、個人のスプレッドシートにデータを保存するためにこの設定を推奨しています。アプリから送られるリクエストのみがスプレッドシートを操作します。
